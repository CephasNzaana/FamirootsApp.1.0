# FamiRoots: Preserving Ugandan Family Heritage

## üìò Project Context & Terminology

### What is FamiRoots?
FamiRoots is an AI-enhanced web platform designed to preserve and explore Ugandan family heritage. It serves as a digital repository of family histories, relationships, and cultural knowledge, with a focus on Uganda's tribal and clan systems.

### Key Terms & Concepts:

1. **Family Heritage**
   - In Ugandan context: The passing down of family history, traditions, and relationships
   - Includes: Names, stories, relationships, tribal affiliations, and clan connections
   - Cultural significance: Preserves traditional knowledge for future generations

2. **Tribe (Endemic to Uganda)**
   - Major ethnic groupings in Uganda (e.g., Baganda, Banyankole, Basoga)
   - Each has distinct cultural practices, languages, and traditions
   - Hierarchical structure with clans as subdivisions

3. **Clan System**
   - Subdivisions within tribes
   - Share common ancestors and totems
   - Important for marriage customs and social organization

4. **Elder**
   - Every tribe has an ancestor from whom clans descend broken down into families
   - An elder is a man in a particular clan from whom many families can trace their origins
   - Individuals trace their origins from paternal figures from either side of parents
   - Elders are crucial reference points for verifying family relationships

5. **Family Tree**
   - Visual representation of family relationships
   - Shows generational connections
   - Includes tribal and clan affiliations

6. **Verification System**
   - Process of confirming family connections
   - Involves elder approval and expert review
   - Maintains accuracy of family histories

7. **Cultural Resources**
   - Traditional practices
   - Historical information
   - Customs and ceremonies
   - Naming conventions

8. **User Types**
   - Seeker: Regular users seeking family information
   - Expert: Verified cultural/genealogical experts
   - Admin: Platform managers

## üîç Core Concept

FamiRoots is an AI-enhanced web platform that preserves Ugandan family heritage by connecting individuals to their ancestral roots through tribal and clan systems. The platform enables users to discover, document, and verify family connections while preserving cultural knowledge across generations.

## üåü Key Features

### 1. User Registration & Profiles
- Simple registration system with basic personal details
- Profile creation with tribal affiliation, clan identification, and known family connections
- Option to upload photos and share family stories

### 2. AI-Generated Family Tree
- **Core Feature**: AI family tree generator that builds and expands connections based on verified clan and elder information
- Visual representation of family relationships organized by clans, not individuals
- Family trees expand automatically when connections through shared elders are verified
- Focuses on showing relationships between families within clans, not isolated individuals

### 3. Elder Verification System
- Centralized database of verified clan elders serving as ancestral anchors
- Three-level verification process:
  - User submissions (unverified)
  - Community verification (by multiple family members)
  - Expert verification (by historians, researchers, or recognized clan authorities)
- Simple interface for users to connect their lineage to established elders

### 4. Tribal & Clan Knowledge Base
- Structured information about Ugandan tribes and clans
- Cultural practices, traditions, and naming conventions
- Accessible reference for users exploring their heritage

### 5. Relationship Analyzer
- Tool for determining if two specific individuals are related
- Users input information about themselves and another person
- System analyzes clan affiliations and elder connections to determine relatedness
- Provides clear explanation of relationship if it exists

### 6. Community Verification Tools
- Collaborative verification system allowing family members to confirm relationships
- Simple dispute resolution for conflicting information
- Rating system for information reliability

### 7. Basic Search & Navigation
- User-friendly interface with Uganda flag colors (black, yellow, red)
- Intuitive navigation between family members, clans, and tribes
- Mobile-responsive design for access across devices

## üë§ User Types & Journeys

### 1. Seekers (Regular Users)
1. User registers and creates a profile with tribal and clan information
2. User connects their lineage to a known elder from their clan
3. AI generates initial family tree showing the user's family's place within the clan structure
4. User adds known family members aligned with clan organization
5. User can use the Relationship Analyzer to check connections with specific individuals
6. User explores clan-based family structures and cultural information
7. Family tree expands as more families within the clan are connected through shared elders

### 2. Experts (Cultural Authorities)
1. Expert registers with credentials and expertise in specific tribal/clan knowledge
2. Admin reviews and verifies expert status based on qualifications
3. Expert gains access to verification dashboard showing pending elder verifications
4. Expert reviews user-submitted elder connections and family-clan relationships
5. Expert approves, rejects, or suggests modifications to submissions
6. Expert contributes to clan knowledge base with historical information
7. Expert participates in resolving conflicting family claims within clans
8. Expert validates the accuracy of clan-based family organizations

### 3. Admins (Platform Managers)
1. Admin registers through special administrative channel
2. Admin reviews expert applications and assigns verification privileges
3. Admin monitors verification activities and quality metrics
4. Admin resolves escalated disputes between users or experts
5. Admin manages the elder database, ensuring integrity
6. Admin oversees clan-based family tree structures
7. Admin maintains tribal and clan knowledge base
8. Admin generates reports on platform usage and cultural preservation impact

## üß† AI Relationship Analyzer

### Core Functionality
The AI Relationship Analyzer is a focused tool that determines whether two specific individuals are related by analyzing their connections to elders and clan affiliations.

### How It Works
1. **Input Collection**: User inputs:
   - Information about themselves (clan, known elders, family connections)
   - Information about the other person (clan, known elders, family connections)

2. **Relationship Analysis**: The system:
   - Traces both individuals' connections to verified elders
   - Analyzes clan and subclan affiliations
   - Examines family lineages within clan structures
   - Identifies common ancestral points if they exist

3. **Relationship Determination**: The analyzer:
   - Confirms or denies the existence of a relationship
   - If related, specifies the exact nature of the relationship (e.g., third cousins, sharing the same great-grandfather)
   - Provides the clan-based context of the relationship
   - Shows the common elder connection that establishes the relationship

4. **Result Communication**: The system:
   - Presents clear visual representation of the relationship path
   - Explains the relationship in cultural context
   - Indicates the generational distance between individuals
   - Highlights the clan significance of the connection

5. **Verification Guidance**: If relationship status is uncertain:
   - Suggests specific information needed for confirmation
   - Directs users to relevant clan elders who might verify the connection
   - Recommends specific experts who could provide clarification

## üìö Source Databases & AI Technologies

### Tribal & Clan Knowledge Base Sources
1. **Primary Sources**:
   - Uganda National Museum archives
   - Cultural Research Centre at Makerere University
   - Traditional kingdom records (Buganda, Bunyoro, Toro, etc.)
   - Oral history recordings from tribal elders
   - Colonial-era anthropological records

2. **Secondary Sources**:
   - Published ethnographic studies on Ugandan tribes
   - Academic research on clan structures
   - Historical migration records
   - National census data with tribal affiliations
   - Cultural preservation NGO databases

3. **Community Contributions**:
   - Verified family histories
   - Elder interviews and testimonies
   - Cultural practice documentation
   - Traditional naming pattern records

### AI-Enhanced Knowledge Database
- **Self-Improving Database**: A core knowledge repository that continuously refines and expands based on machine learning algorithms
- **Data Verification**: Cross-references new information against established patterns
- **Pattern Recognition**: Identifies tribal and clan relationships from fragmented information
- **Knowledge Gap Identification**: Highlights areas where cultural information is incomplete

### AI Algorithms by Feature

1. **AI Family Tree Generator**:
   - **Algorithm**: Graph Neural Networks (GNN)
   - **OpenAI API**: GPT-4 with fine-tuning on family relationship patterns
   - **Purpose**: Constructs clan-based family trees by analyzing connections between families and elders
   - **Implementation**: Uses GPT-4's reasoning capabilities to establish logical family connections based on verified elder relationships

2. **Relationship Analyzer**:
   - **Algorithm**: Path-finding algorithms with GPT-assisted reasoning
   - **OpenAI API**: GPT-4 with few-shot learning examples
   - **Purpose**: Determines precise relationships between two individuals by tracing their connections to common elders
   - **Implementation**: Combines structured data analysis with GPT-4's understanding of Ugandan family relationship terminology

3. **Elder Verification System**:
   - **Algorithm**: Ensemble learning with human-in-the-loop verification
   - **OpenAI API**: GPT-4 with classification fine-tuning
   - **Purpose**: Evaluates the likelihood of submitted elder information being accurate
   - **Implementation**: Analyzes consistency with known historical records and cultural patterns, flagging discrepancies for expert review

4. **Cultural Knowledge Base**:
   - **Algorithm**: Knowledge graph with semantic embedding
   - **OpenAI API**: GPT-4 + Embeddings API
   - **Purpose**: Organizes cultural information into interconnected knowledge structure
   - **Implementation**: Creates semantic relationships between cultural concepts, traditions, and practices

5. **Information Verification**:
   - **Algorithm**: Consensus-based truth discovery
   - **OpenAI API**: GPT-4 with content verification fine-tuning
   - **Purpose**: Evaluates the reliability of submitted cultural and genealogical information
   - **Implementation**: Analyzes information consistency across multiple submissions and sources

## üé® Design System

### Color Palette
```typescript
const UGANDA_THEME = {
  colors: {
    black: "#000000",     // Header, text
    yellow: "#FFCE00",    // Accents, highlights
    red: "#D90000",       // Primary actions, important elements
    background: "#FAF6F1" // Warm, earthy background
  }
};
```

### Typography
```typescript
const TYPOGRAPHY = {
  headings: {
    fontFamily: "'Playfair Display', serif",     // Traditional
    weights: [600, 700]
  },
  body: {
    fontFamily: "'Inter', sans-serif",           // Modern
    weights: [400, 500]
  }
};
```

### Design Patterns
```typescript
const DESIGN_PATTERNS = {
  borderRadius: '0.5rem',
  shadows: {
    small: '0 2px 4px rgba(0,0,0,0.1)',
    medium: '0 4px 6px rgba(0,0,0,0.1)'
  },
  spacing: {
    base: '1rem',
    container: '2rem'
  }
};
```

## üíª Technical Implementation

### Default Users
```typescript
const DEFAULT_USERS = {
  seeker: {
    username: "DefaultSeeker",
    password: "Test@2025",
    role: "user",
    permissions: ["view", "create", "connect"]
  },
  expert: {
    username: "DefaultExpert",
    password: "Test@2025",
    role: "expert",
    permissions: ["view", "create", "connect", "verify"]
  },
  admin: {
    username: "DefaultAdmin",
    password: "Test@2025",
    role: "admin",
    permissions: ["all"]
  }
};
```

### Core Types
```typescript
// User Types
interface BaseUser {
  id: string;
  username: string;
  role: 'user' | 'expert' | 'admin';
  fullName?: string;
  tribe?: string;
  clan?: string;
  createdAt: Date;
}

// Family Member
interface FamilyMember {
  id: string;
  name: string;
  birthYear?: number;
  deathYear?: number;
  tribe: string;
  clan: string;
  isElder: boolean;
  verified: boolean;
  verificationLevel: 'unverified' | 'community' | 'expert';
  stories: Story[];
  relationships: Relationship[];
  familyUnit: string; // Reference to family unit within clan
}

// Cultural Context
interface CulturalContext {
  tribe: string;
  clan: string;
  traditions: string[];
  ceremonies: string[];
  language: string;
}

// Relationship
interface Relationship {
  fromId: string;
  toId: string;
  type: 'parent' | 'child' | 'spouse' | 'sibling';
  verified: boolean;
  verifiedBy?: string;
}

// Story
interface Story {
  id: string;
  title: string;
  content: string;
  memberId: string;
  verified: boolean;
  createdAt: Date;
}

// Clan Structure
interface Clan {
  id: string;
  name: string;
  tribe: string;
  origin: string;
  totem?: string;
  elders: ElderReference[];
  culturalPractices: string[];
  historicalNotes: string[];
  verificationThreshold: number; // Minimum verification score needed
}

// Elder Reference
interface ElderReference {
  id: string;
  name: string;
  approximateEra: string;
  verificationScore: number;
  verifiedBy: string[];
  familyUnits: string[]; // Families descended from this elder
}

// Enhanced Relationship Analyzer Result
interface RelationshipResult {
  isRelated: boolean;
  relationshipType?: string;
  commonElder?: ElderReference;
  generationalDistance?: number;
  clanContext: string;
  confidenceScore: number;
  verificationPath: string[];
}
```

### Basic Component Structure
```typescript
import React from 'react';
import { useAuth } from '@/hooks/useAuth';
import { UGANDA_THEME } from '@/constants/theme';

interface ComponentProps {
  // props definition
}

export const ComponentName: React.FC<ComponentProps> = ({ prop1, prop2 }) => {
  const { user } = useAuth();
  
  return (
    <div className="bg-background p-4 rounded-lg">
      {/* Component content */}
    </div>
  );
};
```

### Context Management
```typescript
// Auth Context
interface AuthContextType {
  user: BaseUser | null;
  isLoading: boolean;
  login: (username: string, password: string) => Promise<void>;
  logout: () => Promise<void>;
}

// Family Context
interface FamilyContextType {
  members: FamilyMember[];
  addMember: (member: Omit<FamilyMember, 'id'>) => Promise<void>;
  updateMember: (id: string, data: Partial<FamilyMember>) => Promise<void>;
}
```

### AI Integration Methods
```typescript
// Family Tree Generation
const generateFamilyTree = async (
  userId: string,
  elderConnections: ElderReference[],
  clanId: string
): Promise<FamilyTreeStructure> => {
  // 1. Gather all verified family units connected to the user's elders
  // 2. Use OpenAI GPT-4 to analyze connections and establish hierarchy
  // 3. Generate tree structure organized by clan and elder connections
  
  const response = await openai.createCompletion({
    model: "gpt-4",
    prompt: generateFamilyTreePrompt(userId, elderConnections, clanId),
    temperature: 0.3, // Lower temperature for more deterministic results
    max_tokens: 2000
  });
  
  return parseFamilyTreeResponse(response.data);
};

// Relationship Analysis
const analyzeRelationship = async (
  person1: FamilyMember,
  person2: FamilyMember
): Promise<RelationshipResult> => {
  // 1. Trace connections to shared elders
  // 2. Use GPT-4 to determine relationship type and context
  // 3. Calculate confidence score based on verification levels
  
  const response = await openai.createCompletion({
    model: "gpt-4",
    prompt: generateRelationshipPrompt(person1, person2),
    temperature: 0.2,
    max_tokens: 1000
  });
  
  return parseRelationshipResponse(response.data);
};

// Knowledge Base Enhancement
const enhanceKnowledgeBase = async (
  newInformation: CulturalInformation,
  existingKnowledge: KnowledgeBase
): Promise<KnowledgeBaseUpdate> => {
  // 1. Use Embeddings API to find related knowledge
  // 2. Use GPT-4 to assess consistency and novelty
  // 3. Integrate new information into knowledge structure
  
  const embeddingResponse = await openai.createEmbedding({
    model: "text-embedding-ada-002",
    input: newInformation.content
  });
  
  const relatedKnowledge = findRelatedKnowledge(
    embeddingResponse.data.embedding,
    existingKnowledge
  );
  
  const integrationResponse = await openai.createCompletion({
    model: "gpt-4",
    prompt: generateKnowledgeIntegrationPrompt(newInformation, relatedKnowledge),
    temperature: 0.3,
    max_tokens: 1500
  });
  
  return parseKnowledgeUpdate(integrationResponse.data);
};
```

## üîß Feature Implementation Guidelines

### 1. Authentication
- Use default users only (no signup)
- Implement role-based access
- Maintain session with Supabase
- Handle loading and error states

### 2. Family Tree
- Implement basic tree visualization
- Allow adding/editing family members
- Support relationship mapping
- Include elder verification

### 3. Cultural Integration
- Add tribe/clan selection
- Include basic traditions listing
- Support elder verification
- Store cultural resources

## ‚ö° Performance Considerations
- Lazy load components
- Optimize images
- Implement basic caching
- Minimize API calls
- Use pagination where needed

## üîí Basic Security
- Role-based access control
- Input validation
- Basic error handling
- Session management

## üéØ Development Process
- Set up basic project structure
- Implement authentication
- Create family tree visualization
- Add cultural information
- Implement verification system
- Add admin features

## üì± Responsive Design
```typescript
const BREAKPOINTS = {
  mobile: '320px',
  tablet: '768px',
  desktop: '1024px'
};

// Tailwind classes example
const RESPONSIVE_CLASSES = {
  container: 'w-full px-4 md:px-6 lg:px-8',
  card: 'p-4 md:p-6 rounded-lg shadow-sm',
  grid: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4'
};
```

## üöÄ Error Handling
```typescript
const handleError = (error: unknown) => {
  console.error('Operation failed:', error);
  return {
    message: error instanceof Error ? error.message : 'An unexpected error occurred',
    status: 'error'
  };
};
```

## üìä Edge Cases
- Network failures
- Invalid data
- Unauthorized access
- Concurrent updates
- Missing relationships
- Unverified information

## üîç Testing Guidelines
- Test user roles
- Verify relationships
- Check cultural data
- Validate form inputs
- Test responsiveness

## üí° Implementation Best Practices
- Keep the interface simple and intuitive
- Focus on cultural authenticity
- Prioritize performance
- Handle errors gracefully
- Maintain consistent styling using the Ugandan flag colors
- Ensure the platform respects cultural sensitivities
- Make the family tree visualization clear and understandable
- Prioritize the elder verification system as a cornerstone feature
